<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<title>ZabbixAPI. RZabbix 0.1.0</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="author" content="
Marcin Kosinski, &lt;a href='mailto:m.p.kosinski@gmail.com'&gt;m.p.kosinski@gmail.com&lt;/a&gt;
">

<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/bootstrap-responsive.css" rel="stylesheet">
<link href="css/highlight.css" rel="stylesheet">
<link href="css/staticdocs.css" rel="stylesheet">

<!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
  </head>

  <body>
    <div class="navbar">
  <div class="navbar-inner">
    <div class="container">
      <a class="brand" href="#">RZabbix 0.1.0</a>
      <div class="nav">
        <ul class="nav">
          <li><a href="index.html"><i class="icon-home icon-white"></i> Index</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>

    <div class="container">
      <header>
        
      </header>
      
      <h1>R module for working with the 'Zabbix API'</h1>

<div class="row">
  <div class="span8">
    <h2>Usage</h2>
    <pre><div>ZabbixAPI(server&nbsp;=&nbsp;"http://localhost/zabbix", body&nbsp;=&nbsp;list(), user.agent&nbsp;=&nbsp;"RZabbix", content.type&nbsp;=&nbsp;"application/json-rpc", encode&nbsp;=&nbsp;"json", ..., only.content&nbsp;=&nbsp;TRUE, fromJSON&nbsp;=&nbsp;TRUE, content.only.result&nbsp;=&nbsp;TRUE)</div></pre>
    
    <h2>Arguments</h2>
    <dl>
      <dt>server</dt>
      <dd>A character with base URI for zabbix web interface (omitting /api_jsonrpc.php).</dd>
      <dt>body</dt>
      <dd>A named list specifying <code>method</code>, user <code>auth</code> token and additional <code>params</code> (passed in <code>jsonlite::unbox(data.frame())</code>) to be used during request.
It can also be passed as <code>JSON</code> through <code>character</code> with <code>fromJSON('json_string')</code> - see Examples. 
Available methods are described in <a href = 'https://www.zabbix.com/documentation/3.0/manual/api'>Zabbix Documentation</a>. One does not have to pass <code>id</code> and <code>jsonrpc</code>.</dd>
      <dt>user.agent, content.type</dt>
      <dd>Character arguments passed to <a href='http://www.inside-r.org/packages/cran/httr/docs/POST'>POST</a> through <a href='http://www.inside-r.org/packages/cran/httr/docs/user_agent'>user_agent</a> and <a href='http://www.inside-r.org/packages/cran/httr/docs/content_type'>content_type</a>.</dd>
      <dt>encode</dt>
      <dd>The same as <code>encode</code> in <a href='http://www.inside-r.org/packages/cran/httr/docs/POST'>POST</a>.</dd>
      <dt>...</dt>
      <dd>Further arguments passed to <a href='http://www.inside-r.org/packages/cran/httr/docs/POST'>POST</a>.</dd>
      <dt>only.content, fromJSON, content.only.result</dt>
      <dd><ul>
<li> <code>only.content</code> Should return results only for <code>content</code> part of the <a href='http://www.inside-r.org/packages/cran/httr/docs/response'>response</a>.
  </li>
<li> <code>fromJSON</code> Should apply <a href='http://www.inside-r.org/packages/cran/jsonlite/docs/fromJSON'>fromJSON</a> conversion for <code>content</code> when <code>only.content = TRUE</code>.
  </li>
<li> <code>content.only.result</code> Should return only <code>result</code> part of <code>fromJSON(rawToChar(response$content))</code> when <code>only.content = TRUE, fromJSON = TRUE</code>.
</li>
</ul>
</dd>
    </dl>
    
    <div class="Description">
      <h2>Description</h2>

      <p><code>ZabbixAPI</code> function enables easy and direct communication with <code>Zabbix API</code> from <span class = "pkg">R</span>.
Each request to the <code>Zabbix API</code> requires passing <code>auth</code> authentication token. 
Generation of the authentication token is explained <a href = 'https://www.zabbix.com/documentation/3.0/manual/api/reference/user/login'>here</a> or
can be seen in Examples section.</p>
  
    </div>

    <div class="Details">
      <h2>Details</h2>

      <p>Communication wih the <code>Zabbix API</code> is described at <a href = 'https://www.zabbix.com/documentation/3.0/manual/api/reference'>Zabbix API Manual Reference</a> and
relies on specifying methods of call and additional parameters in the <a href = 'http://www.jsonrpc.org/specification'>JSON-RPC</a> format. An example of such specification
can be found in the <a href = 'https://www.zabbix.com/documentation/3.0/manual/api/reference/user/login#examples'>example of authenticating a user</a> but in <span class = "pkg">RZabbix</span> this
should be specified in parameter <code>body</code> where parameters are passed in the named list, where additional <code>params</code> should be passed in <code>jsonlite::unbox(data.frame())</code>.
See examples.</p>
  
    </div>

    <div class="Note">
      <h2>Note</h2>

      <p>Bug reports and feature requests can be sent to <a href = 'https://github.com/MarcinKosinski/RZabbix/issues'>https://github.com/MarcinKosinski/RZabbix/issues</a></p>
  
    </div>
    
    <h2 id="examples">Examples</h2>
    <pre class="examples"><div class='input'>## Not run: 
# # user authentication
# #####################
# ZabbixAPI(&#39;http://localhost/zabbix&#39;,
#           body = list(method = &quot;user.login&quot;,
#                       params = jsonlite::unbox(
# 	                      data.frame(user = &quot;Admin&quot;,
# 	                                 password = &quot;zabbix&quot;)))) -&gt; auth
# 
# # request to get histoy of an item of &#39;item_id&#39; number
# ######################################################
# ZabbixAPI(&#39;http://localhost/zabbix&#39;,
#           body = list(method = &quot;history.get&quot;,
#                       params = jsonlite::unbox(
#                        data.frame(output = &quot;extend&quot;,
#                                   itemids = &quot;item_id&quot;,
#                                   history = 0,
#                                   sortfield = &quot;clock&quot;,
#                                   sortorder = &quot;DESC&quot;,
#                                   limit = 10)
#                      ),
#                      auth = auth))
# 
# # API info
# ##########
# ZabbixAPI(&#39;http://localhost/zabbix&#39;,
#           body = list(method = &quot;apiinfo.version&quot;))
# 
# # fromJSON example for get event data fo object with &#39;object_id&#39; number
# #######################################################################
# library(jsonlite)
# paste0(&#39;{
#     &quot;method&quot;: &quot;event.get&quot;,
#     &quot;params&quot;: {
#         &quot;output&quot;: &quot;extend&quot;,
#         &quot;select_acknowledges&quot;: &quot;extend&quot;,
#         &quot;objectids&quot;: &quot;object_id&quot;,
#         &quot;sortfield&quot;: [&quot;clock&quot;, &quot;eventid&quot;],
#         &quot;sortorder&quot;: &quot;DESC&quot;
#     },
#     &quot;auth&quot;: &quot;&#39;, auth, &#39;&quot;
# }&#39;) -&gt; json_rpc
# 
# ZabbixAPI(&#39;http://localhost/zabbix&#39;,
#           body = fromJSON(json_rpc)) -&gt; event.info
# # colnames - https://www.zabbix.com/documentation/3.0/manual/api/reference/event/object           
#           
# event.info  %&gt;%
#   select(value, clock) %&gt;%
#   mutate(clock = 
#             as.POSIXct(as.numeric(clock),
#                        tz = &quot;GMT&quot;,
#                        origin = &quot;1970-01-01&quot;)) -&gt; clock2viz
# 
# list2bind &lt;- list()
# for(i in 1:(nrow(clock2viz)-1)) {
#   data.frame(
#     times = 
#       seq(from = clock2viz$clock[i+1],
#         to = clock2viz$clock[i],
#         by = &quot;min&quot;) %&gt;%
#       head(-1),
#     status = clock2viz$value[i+1],
#     stringsAsFactors = FALSE) -&gt;
#   list2bind[[i]]
# }
# 
# library(ggplot2)
# do.call(bind_rows, list2bind) %&gt;% 
#   ggplot(aes(x=times, y = status)) + 
#   geom_point(size = 0.1) 
# ## End(Not run)
</div></pre>
  </div>
  <div class="span4">
    <!-- <ul>
      <li>ZabbixAPI</li>
    </ul>
    <ul>
      
    </ul> -->
      
    
    <h2>Author</h2>
    
Marcin Kosinski, <a href='mailto:m.p.kosinski@gmail.com'>m.p.kosinski@gmail.com</a>

    
  </div>
</div>
      
      <footer>
      <p class="pull-right"><a href="#">Back to top</a></p>
<p>Built by <a href="https://github.com/hadley/staticdocs">staticdocs</a>. Styled with <a href="https://getbootstrap.com/2.0.4/">bootstrap</a>.</p>
      </footer>
    </div>
  </body>
</html>